<head>
    <meta charset="utf-8"> 
</head>   
<!-- See the file js/editor.js for the version number of this software, its license etc -->
<h2>Anleitung für den ProFormA-Editor</h2>

<p>Der ProFormA-Editor ermöglicht es, eine XML-Datei für Programmieraufgaben neu zu erstellen
(einschließlich einer Problem-Datei für LON-CAPA). Außerdem kann eine XML-Datei
im entsprechenden Format eingelesen, um gewünschte Tests oder
zusätzliche Dateien erweitert und wieder exportiert werden.
Das XML-Format muss dem <a href="https://github.com/ProFormA/taskxml" target="new">
Standard für den Austausch von Programmieraufgaben
entsprechen</a>.</p>

<b style="color:red"> Der Export nutzt eine Funktionalität, die nicht jeder Browser in der benötigten Form unterstützt. Chrome (getestet mit Version 56.0.2924.87 (64-bit)) und Firefox (getestet mit 51.0.1 (64-Bit)) sind hier die Browser der Wahl. 
    </b>
<br>
In Internet Explorer (Version 11.576), Edge (Version 38.14393) und Safari funktioniert der Export gar nicht oder nur eingeschränkt. Hier besteht allerdings noch die Möglichkeit, die Dateien aus den Textfeldern im Output-Reiter zu kopieren und die Dateien (UTF-8-Kodierung) von Hand zu erzeugen. 
    


<h3>Aufbau des Editors</h3>
Der Editor gliedert sich in mehrere Reiter, die jeweils unterschiedliche Bestandteile einer Aufgabe beinhalten:
<ul>
    <li><b>Main:</b> Beschreibung und wichtige Parameter der Aufgabe</li>
    <li><b>Model Solutions:</b> enthält eine oder (in Ausnahmefällen auch) mehrere Musterlösungen </li>
    <li><b>Tests:</b> enthält Angaben zu Tests, mit denen überprüft wird, ob eine Einreichung korrekt oder fehlerhaft ist</li>
    <li><b>Files:</b> enthält die Dateien, die für die Musterlösung und Tests genutzt werden</li>
    <li><b>Output:</b> Anzeige der Ergebnisdatei (nur zu Debugzwecken)</li>
        
</ul>

<h3>Erstellen einer neuen Aufgabe</h3>

<p>Zunächst werden unter dem Main-Reiter der Aufgabentext (Description), der Titel der
Aufgabe, die Programmiersprache, die maximale Dateigröße der studentischen
Einreichung und der Dateityp (als MimeType) eingegeben. Der LON-CAPA-Pfad
muss geändert werden, so dass er den Benutzernamen und eventuell die
Namen der Unterordner enthält.</p>

<p>Wichtig ist im gesamten Formular: Alle mit einem roten Stern (*) gekennzeichneten 
Felder müssen ausgefüllt sein, damit eine Aufgabe exportiert werden kann.</p>

<!--<p><img alt="doku1" src="images/doku1.png" /></p>-->

<p>Danach müssen mindestens eine Musterlösung und geeignete Tests erstellt werden. </p>

<h4>Musterlösung</h4>
<p> Die Musterlösung wird im Reiter Musterlösung eingegeben. Sie besteht aus dem Quellcode, der sinnvollerweise
in einem externen Editor bzw. einer entsprechenden Entwicklungsumgebung erstellt und vorab getestet wird.
    Die Datei wird entweder über die &ltload...&gt-Option der Filename-Auswahlliste oder per Drag&Drop
in den Editor geladen. Alternativ kann auch von Hand in dem Files-Reiter eine Datei erstellt und anschließend mit der
Musterlösung verknüpft werden.
</p>
<h4>Tests</h4>
<p>
    
    Analog zur Musterlösung wird mit den Tests verfahren. Hier müssen entprechend der Programmiersprache und der Aufgabenstellung
    geeignete Tests definiert werden.
    Der Editor bietet abhängig von der Programmiersprache unterschiedliche Testmöglichkeiten an:
    Bei Java gibt es z.B. JUnit- oder Compiler-Tests.
    Innerhalb der Testfelder
    gibt es mehrere einstellbare Optionen. Es kann festgelegt werden, ob ein
    Testergebnis für Studierende sichtbar (public) ist oder nicht. Die Auswahl
    &bdquo;required&ldquo; legt fest, ob ein Test bestanden werden muss, um eine Aufgabe zu
    bestehen oder nicht. Normalerweise muss dieser Wert auf <code>True</code> gesetzt werden.
    Anhand der verschiedenen Knöpfe unten auf der Test-Seite können weitere Tests hinzugefügt werden.

</p>

<h4>Dateien</h4>
<p>
Jede Datei muss einen Namen mit einer entsprechende Endung (z.B. &bdquo;.java&ldquo;) erhalten.
    (Werden die Dateien über die  &ltload...&gt-Option oder per
    Drag&Drop geladen, so wird der Original-Dateiname automatisch übernommen.)
</p>
<p>
    Bei Dateien muss immer ein Paramer <code>Class</code> angegeben werden. Dieser hat folgende Bedeutung:</p>
<ul>
    <li><code>internal</code> (Default), <code>internal-library</code>:  für die Studierenden ist die Datei
    nicht sichtbar</li>
    <li><code>library</code>: die Datei ist für die Studierenden sichtbar </li>
    <li><code>template</code>: die Datei enthält ein Code-Template</li>
    <li><code>instruction</code>: die Datei enthält weitere Details zur Aufgabenstellung </li>
</ul>
<p>
<!--
Es kann festgelegt werden, ob Dateien bei 
der späteren Nutzung für die Studierenden sichtbar (library) oder unsichtbar 
(internal, internal-library) sind, als Code-Template (template) bereitgestellt werden
oder weitere Details zur Aufgabenstellung (instruction) enthalten.
-->
Dateien beinhalten zumeist Tests, zum Beispiel Unittests, Blackbox Tests oder
statische Tests. Der Zweck jeder Datei wird
dadurch angegeben, dass sie mit einem Test oder einer Musterlösung verknüpft wird.
Die Verbindung zwischen der Datei und ihrem Zweck erfolgt über den Dateinamen.</p>


<h3>Exportieren und Zippen</h3>

<p>Sobald alle gewünschten Dateien und Tests hinzugefügt wurden, kann 
die Aufgabe als Zip-Datei exportiert werden.

    Dazu wird der <code>Save Zip File</code>-Knopf verwendet. Dabei wird die Zip-Datei erzeugt, die
    direkt in LON-CAPA hochgeladen werden kann.
    Für LON-CAPA muss <em>zusätzlich</em> noch die Problem-Datei erzeugt werden. Dazu dient der
    <code>Save LON-CAPA Problem File</code>-Knopf auf der Main-Seite.



<!-- <p><img alt="doku3" src="images/doku3.png" /></p>-->

<h3>Importieren einer bestehenden XML-Datei</h3>

<p>Eine XML-Datei oder eine Zip-Datei, welche eine task.xml enthält, können 
auch zu Bearbeitungszwecken eingelesen
werden. Dazu wird über den <code>Load Task...</code>-Knopf  eine Datei gesucht und geladen.
Die Aufgabe kann nun wie oben beschrieben verändert und auch wieder exportiert
werden.</p>

<h3>Einbinden in LON-CAPA</h3>

<p>Um eine Aufgabe in LON-CAPA zu erzeugen, müssen folgende Schritte erfolgen:</p>
<ol>
    <li>Die generierte ZIP-Datei muss in LON-CAPA hochgeladen werden.</li>
    <li>Die hochgeladene Datei muss veröffentlicht werden (auch nach Änderungen).</li>
    <li>
        Zusätzlich muss in LON-CAPA eine neue Aufgabe (als eCult-Programmieraufgabe)
        erstellt werden.
    </li>
    <li>
        Die LON-CAPA-Problem-Datei wird manuell (im XML-Editor von LON-CAPA) in die neue Aufgabe kopiert.
    </li>

</ol>

<p>
<b>Wichtig:</b> Der in der LON-CAPA-Problem-Datei angegebene Pfad
(welcher auf der Main-Seite eingestellt wurde) muss mit dem Ort übereinstimmt,
an dem die ZIP-Datei in LON-CAPA hochgeladen wurde.

</p>
<p>


<!--Zuletzt ist noch zu beachten, dass die ZIP-Datei
auch schon beim Testen der Aufgabe veröffentlicht werden muss, 
da diese sonst nicht verarbeitet wird.--!</p>


</p>