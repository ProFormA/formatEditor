<head>
    <meta charset="utf-8">
</head>
<!-- See the file js/editor.js for the version number of this software, its license etc -->
<h2>Anleitung für den ProFormA-Editor</h2>

<p>Der ProFormA-Editor ermöglicht es, eine XML-Datei für Programmieraufgaben neu zu erstellen
(einschließlich einer Problem-Datei für LON-CAPA). Außerdem kann eine XML-Datei
im entsprechenden Format eingelesen, um gewünschte Tests oder
zusätzliche Dateien erweitert und wieder exportiert werden.
Das XML-Format entspricht dem <a href="https://github.com/ProFormA/taskxml" target="new">
Standard für den Austausch von Programmieraufgaben
entsprechen</a>.</p>

<p>
Die Programmieraufgaben bestehen im Wesentlichen aus einer Aufgabenbeschreibung und geeigneten Testfällen. Diese
sollen üblicherweise die Funktionaität der studentischen Einreichung überprüfen. Es können aber je nach Zielsetzung
auch andere Kriterien hinzugezogen werden (Compilierbarkeit, Stil, Robustheit, Performance...).
</p>

<p>
    Die Testfälle nutzen bekannte Standards, die je nach gewählten Programmiersprache zur Verfügung stehen
    (z.B. JUNIT und Checkstyle bei Java).
</p>

<b style="color:red"> Der Editor nutzt Funktionen, die nicht jeder Browser in
  der benötigten Form unterstützt.
  Chrome (getestet mit Version 65.0.3325.181 (64-bit)) und Firefox (getestet mit 59.0.1 (64-Bit)) sind hier die Browser der Wahl.
    </b>
<br>
In Internet Explorer, Edge (Version 38.14393) und Safari funktioniert der Export nicht.


<h3>Aufbau des Editors</h3>
Der Editor gliedert sich in mehrere Reiter (auch als Tabs oder Registerkarten bezeichnet), die jeweils unterschiedliche Bestandteile einer Aufgabe beinhalten:
<ul>
    <li><b>Main:</b> Beschreibung und wichtige Parameter der Aufgabe</li>
    <li><b>Model Solutions:</b> enthält eine oder (in Ausnahmefällen auch) mehrere Musterlösungen </li>
    <li><b>Tests:</b> enthält Angaben zu Tests, mit denen überprüft wird, ob eine Einreichung korrekt oder fehlerhaft ist</li>
    <li><b>Files:</b> listet alle Dateien auf, die eingesetzt werden</li>
    <li><b>Output:</b> Anzeige der Ergebnisdatei (nur zu Debugzwecken)</li>

</ul>

<h3>Erstellen einer neuen Aufgabe</h3>

<p>Zunächst wird unter dem Main-Reiter die Aufgabenbeschreibung erstellt.
Damit wird vor allem die studentische Sicht auf die Aufgabe festgelegt. Sie besteht aus:
<ul>
    <li>dem Titel</li>
    <li>der eigentlichen Beschreibung in html</li>
    <li>ggf. Anhänge, die die Beschreibung der Aufgabe ergänzen (Bilder, pdfs, ...)</li>
    <li>ggf. Dateien, die der Studierende zum Lösen der Aufgabe benötigt (Bibliotheken, Interface-Dateien, ...)</li>
    <li>und der Sprache, in der die Aufabe gestellt ist</li>
</ul>

<p>
Dazu muss weiterhin die Programmiersprache aus einer Liste ausgewählt werden.
</p>

<p>
In einem weiteren Abschnitt kann die studentische Einreichung eingeschränkt werden, um bereits auf Client-Seite
einige Fehler abfangen zu können (maximale Dateigröße, Dateityp (als MimeType)).
</p>

<p>
Hier können auch ein oder mehrere Templates (Code-Schablonen) angegeben werden. Diese erleichtern dem Studierenden den Einstieg
in die Aufgabe und helfen, lange Schnittstellenbeschreibungen zu vermeiden.
    <br>
    Bei Verwendung des Editors im Lernmanagementsystem wird dieser beim ersten Darstellen der Aufgabe
    mit der Schablone vorbelegt.
    Der Lernende kann dann seinen Code direkt in die Schablone tippen. <br>

    Wird der Filepicker eingesetzt, wird die Code-Vorlage als Download angeboten.<br>

</p><p>
Bei Nutzung von LON-CAPA muss der Pfad zur Aufgabe relativ zur Problem-Datei angegeben werden.
</p><p>
Beispiel: Wenn die LON-CAPA-Problem-Datei in LON-CAP im Ordner

    <code> https://vita.ostfalia.de/res/fhwf/ecult/Java/</code>

    liegt und die Aufgaben-Datei (zip-Datei)
    in den Unterordner Ordner <code>zip</code> abgelegt werden soll, dann kann der LON-CAPA-Pfad entweder mit

    <code>zip/</code>

    oder aber absolut mit

    <code>/res/fhwf/ecult/Java/zip/</code>

    angegeben werden.
</p>

<p>Wichtig ist im gesamten Formular: Alle mit einem roten Stern (*) gekennzeichneten
Felder müssen ausgefüllt sein, damit eine Aufgabe exportiert werden kann.</p>

<h4>Musterlösung</h4>
<p> Die Musterlösung wird im Reiter Musterlösung eingegeben. Sie besteht aus dem Quellcode, der sinnvollerweise
in einem externen Editor bzw. einer entsprechenden Entwicklungsumgebung erstellt und vorab getestet wird.

</p><p>
    Die Datei wird entweder über die &ltload...&gt-Option der Filename-Auswahlliste oder am einfachsten per Drag&Drop
in den Editor geladen. Alternativ kann auch von Hand in dem Files-Reiter eine Datei erstellt und anschließend mit der
Musterlösung verknüpft werden.

</p><p>
    Wichtig: Wenn die studentische Eireichung nur aus Text in einem Editor (im Gegensatz zu einer
    hochgeladenen Datei) besteht, so wird dieser Text im Grader in einer Datei gespeichert, die
    denselben Namen wie die Musterlösung trägt. Es ist daher auf den korrekten Namen der Musterlösung zu achten.
    (In Planung: eigenes Feld für den Dateinamen)

</p>
<h4>Tests</h4>

<p>
    Die Tests bilden den Kern der Aufgabe. Sie werden vom Grader ausgeführt, um eine Bewertung der
    studentischen Einreichung zu ermitteln. Hier müssen entprechend der Programmiersprache und der Aufgabenstellung
    geeignete Tests definiert werden.

    Der Editor bietet abhängig von der Programmiersprache unterschiedliche Testmöglichkeiten an:
    Bei Java gibt es z.B. JUnit- oder Compiler-Tests.


</p><p>
    Innerhalb der Tests gibt es unterschiedliche einstellbare Optionen. Es kann festgelegt werden, ob ein
    Testergebnis für Studierende sichtbar (<code>public</code>) ist oder nicht.

    Die Auswahl <code>required</code> legt fest, ob ein Test bestanden werden muss, um eine Aufgabe zu
    bestehen oder nicht. Dieser Schalter ist üblicherweise zu setzen.

</p><p>
    Testskripte werden analog zur Musterlösung hinzugefügt.

</p><p>
    Anhand der verschiedenen Knöpfe unten auf der Test-Seite können weitere Tests hinzugefügt werden.
</p>

<h4>Dateien</h4>
<p>
    Jede Datei muss einen Namen mit einer entsprechende Endung (z.B. <code>.java</code>) erhalten.
    (Werden die Dateien über die &ltload...&gt-Option oder per
    Drag&Drop geladen, so wird der Original-Dateiname automatisch übernommen.)
</p><p>
    Eine Besonderheit gibt es für Java-Dateien.
    Hier wird der Dateiname aus dem Dateiinhalt ermittelt (Package und Klassenname). Stimmt er nicht mit dem
    echten Dateinamen überein, so erscheint eine Warnung.
</p><p>
    Alle Dateien sollten mit Tests, der Musterlösung oder auf der Hauptseite (Template, ...) verknüpft sein.
</p>
<p>
    Dateien haben je nach Anwendungszweck eine unterschiedliche Sichtbarkeit:</p>
<table border="1">
    <tr><td><b>Anzeige<br>(interne Bezeichnung)</b></td><td><b>Bedeutung</b></td><td><b>sichtbar für Grader</b></td><td><b>sichtbar für Studierende</b></td></tr>

    <tr><td><b>Code attachment<br>(library)</b></td><td>enthält Funktionen, die benötigt werden,
        um die studentische Einreichung laufen lassen zu können.<br>
        </td><td>x</td><td>x</td></tr>

    <tr><td><b>Other attachment<br>(instruction)</b></td><td>enthält weitere Details zur Aufgabenstellung.
        Dies kann zum Beispiel ein pdf sein oder ein Bild.<br>
    </td><td>-</td><td>x</td></tr>

    <tr><td><b>Code-Schablone<br>(template)</b></td><td>

        Code-Schnipsel, der vom Studierenden bis zur vollständigen Lösung ergänzt werden soll.

        Sind mehrere Templates angegeben, wird in LON-CAPA das erste genommen, was 'embedded' (Angabe bei der Datei) ist.
    </td><td>-</td><td>x</td></tr>

    <tr><td><b>Test, Musterlösung<br>(internal)</b></td><td>Musterlösung(en) und die Testskripte
    </td><td>x</td><td>-</td></tr>

    <tr><td><b>Library-Flag bei Datei gesetzt<br>(internal-library)</b></td>
        <td>Datei wird grader- und programmiersprachenabhängig als Bibliothek betrachtet<br>
    </td><td>x</td><td>-</td></tr>

</table>

<p>
<!--
Es kann festgelegt werden, ob Dateien bei
der späteren Nutzung für die Studierenden sichtbar (library) oder unsichtbar
(internal, internal-library) sind, als Code-Template (template) bereitgestellt werden
oder weitere Details zur Aufgabenstellung (instruction) enthalten.
-->
Dateien beinhalten zumeist Tests, zum Beispiel Unittests, Blackbox Tests oder
statische Tests. Der Zweck jeder Datei wird
dadurch angegeben, dass sie mit einem Test oder einer Musterlösung verknüpft wird.
Die Verbindung zwischen der Datei und ihrem Zweck erfolgt über den Dateinamen.</p>


<h3>Exportieren und Zippen</h3>

<p>Sobald alle gewünschten Dateien und Tests hinzugefügt wurden, kann
die Aufgabe als Zip-Datei exportiert werden.

    Dazu wird der <code>Save Zip File</code>-Knopf verwendet. Dabei wird die Zip-Datei erzeugt, die
    direkt in LON-CAPA hochgeladen werden kann.
    Für LON-CAPA muss <em>zusätzlich</em> noch die Problem-Datei erzeugt werden. Dazu dient der
    <code>Save LON-CAPA Problem File</code>-Knopf auf der Main-Seite.



<!-- <p><img alt="doku3" src="images/doku3.png" /></p>-->

<h3>Importieren einer bestehenden XML-Datei</h3>

<p>Eine XML-Datei oder eine Zip-Datei, welche eine task.xml enthält, können
auch zu Bearbeitungszwecken eingelesen
werden. Dazu wird über den <code>Load Task...</code>-Knopf  eine Datei gesucht und geladen.
Die Aufgabe kann nun wie oben beschrieben verändert und auch wieder exportiert
werden.</p>

<h3>Einbinden in LON-CAPA</h3>

<p>Um eine Aufgabe in LON-CAPA zu erzeugen, müssen folgende Schritte erfolgen:</p>
<ol>
    <li>Die generierte ZIP-Datei muss in LON-CAPA hochgeladen werden.</li>
    <li>Die hochgeladene Datei muss veröffentlicht werden (auch nach Änderungen).</li>
    <li>
        Zusätzlich muss in LON-CAPA eine neue Aufgabe (als eCult-Programmieraufgabe)
        erstellt werden.
    </li>
    <li>
        Die LON-CAPA-Problem-Datei wird manuell (im XML-Editor von LON-CAPA) in die neue Aufgabe kopiert.
    </li>

</ol>

<p>
<b>Wichtig:</b> Der in der LON-CAPA-Problem-Datei angegebene Pfad
(welcher auf der Main-Seite eingestellt wurde) muss mit dem Ort übereinstimmt,
an dem die ZIP-Datei in LON-CAPA hochgeladen wurde.

</p>
<p>


<!--Zuletzt ist noch zu beachten, dass die ZIP-Datei
auch schon beim Testen der Aufgabe veröffentlicht werden muss,
da diese sonst nicht verarbeitet wird.--!</p>


</p>
